os: osx
language: objective-c

env:
    - MESON_OPTS=-Djit=true
    - MESON_OPTS=-Djit=false

script:
    # this is so satanic i can't even begin to explain it
    # - brew update
    - brew install llvm yarn
    - export PATH=/usr/local/bin:/usr/local/sbin:/usr/local/opt/llvm/bin:$PATH
    - pip3 install meson
    - curl -LO https://github.com/ninja-build/ninja/releases/download/v1.8.2/ninja-mac.zip
    - unzip ninja-mac.zip ninja -d ~/bin
    - xcodebuild -project iSH.xcodeproj -alltargets -sdk iphoneos CODE_SIGNING_ALLOWED=NO
